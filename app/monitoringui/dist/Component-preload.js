//@ui5-bundle monitoringui/Component-preload.js
sap.ui.predefine("monitoringui/Component", ["sap/ui/core/UIComponent"],t=>{"use strict";return t.extend("monitoringui.Component",{metadata:{manifest:"json"},init(){t.prototype.init.apply(this,arguments)}})});
sap.ui.predefine("monitoringui/controller/App.controller", ["sap/ui/core/mvc/Controller"],e=>{"use strict";return e.extend("monitoringui.controller.App",{onInit(){}})});
sap.ui.predefine("monitoringui/controller/BaseController", ["sap/ui/core/mvc/Controller"],function(e){"use strict";return e.extend("monitoringui.controller.BaseController",{getModelMain(){return this.getOwnerComponent().getModel("vm")},getRouter(){return this.getOwnerComponent().getRouter()},getI18nText(e){return this.getView().getModel("i18n").getResourceBundle().getText(e)},showBusyIndicator(){sap.ui.core.BusyIndicator.show(0)},hideBusyIndicator(){sap.ui.core.BusyIndicator.hide()},async callAction(e,t={}){const o=this.getOwnerComponent().getModel();const n=o.bindContext(`/${e}(...)`);Object.entries(t).forEach(([e,t])=>n.setParameter(e,t));await n.execute();return n.getBoundContext().getObject()},showActionError(e,t){const o=e?.message||e?.error?.message||e?.cause?.message||(typeof e==="string"?e:null)||t||"Action failed";sap.m.MessageBox.error(o)}})});
sap.ui.predefine("monitoringui/controller/PhysicalOverview.controller", ["sap/ui/core/mvc/Controller","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/m/MessageToast","sap/m/MessageBox"],function(e,t,s,n,o){"use strict";function a(e,n){if(!Array.isArray(n)||n.length===0)return null;const o=[];for(const a of n){const n=a.operator||"EQ";const i=a.values?.[0];const r=a.values?.[1];if(i===undefined||i===null||i==="")continue;switch(n){case"BT":if(r!==undefined&&r!==null&&r!=="")o.push(new t(e,s.BT,i,r));break;case"Contains":o.push(new t(e,s.Contains,i));break;case"StartsWith":o.push(new t(e,s.StartsWith,i));break;case"EndsWith":o.push(new t(e,s.EndsWith,i));break;case"NE":o.push(new t(e,s.NE,i));break;case"LT":o.push(new t(e,s.LT,i));break;case"LE":o.push(new t(e,s.LE,i));break;case"GT":o.push(new t(e,s.GT,i));break;case"GE":o.push(new t(e,s.GE,i));break;default:o.push(new t(e,s.EQ,i));break}}if(!o.length)return null;return o.length===1?o[0]:new t({and:false,filters:o})}function i(e){return Array.isArray(e)&&e[0]?.values?.[0]?String(e[0].values[0]).trim():""}return e.extend("monitoringui.controller.PhysicalOverview",{onInit(){const e=new sap.ui.model.json.JSONModel({saveEnabled:false,busy:false,pendingCount:0,deleteEnabled:false,downloadEnabled:false});this.getView().setModel(e,"ui");this._pendingEdits=new Map},_getSelectedContext:function(){const e=this.byId("physTable").getSelectedContexts();return e&&e.length?e[0]:null},_updateSaveState(){const e=this.getView().getModel("ui");const t=this._pendingEdits.size>0;e.setProperty("/saveEnabled",t);e.setProperty("/pendingCount",this._pendingEdits.size)},async onSave(){const e=this.getView().getModel("ui");const t=Array.from(this._pendingEdits.values()).map(e=>({warehouse:e.scope.warehouse,storageBin:e.scope.storageBin,topHU:e.scope.topHU,stockHU:e.scope.stockHU,product:e.scope.product,currentBatch:e.currentBatch,newBatch:e.newBatch,uom:e.uom,newTotalQuantity:e.newTotalQuantity}));if(!t.length){sap.m.MessageToast.show("No changes to save.");return}e.setProperty("/busy",true);e.setProperty("/saveEnabled",false);const s=this.getView().getModel();const n=this.byId("physTable");try{const e=s.bindContext("/EditStock(...)");e.setParameter("edits",t);await e.execute();sap.m.MessageToast.show("Saved.");this._pendingEdits.clear();this._updateSaveState();n.getBinding("items")?.refresh()}catch(e){sap.m.MessageBox.error(e?.message||"Save failed.");this._updateSaveState()}finally{e.setProperty("/busy",false)}},onCellLiveChange(e){const t=e.getSource();const s=t.getParent();const n=s.getBindingContext();if(!n)return;const o=n.getObject();const a=o.ID;const i=t.getCustomData().find(e=>e.getKey()==="field")?.getValue();if(!this._pendingEdits.has(a)){this._pendingEdits.set(a,{scope:{warehouse:o.warehouse,storageBin:o.storageBin,topHU:o.topHU??null,stockHU:o.stockHU??null,product:o.product??null},currentBatch:o.batch??null,newBatch:o.batch??null,uom:o.uom??null,newTotalQuantity:Number(o.quantity)||0})}const r=this._pendingEdits.get(a);if(i==="batch")r.newBatch=t.getValue()||null;else if(i==="quantity")r.newTotalQuantity=Number(t.getValue()||0);const c=(r.newBatch??"")===(r.currentBatch??"")&&Number(r.newTotalQuantity)===Number(o.quantity||0);if(c)this._pendingEdits.delete(a);this._updateSaveState()},onSelectionChange(e){const t=e.getSource();const s=t.getSelectedItems().length>0;const n=this.getView().getModel("ui");n.setProperty("/downloadEnabled",s);n.setProperty("/deleteEnabled",s)},onFBSearch:function(){const e=this.byId("physTable").getBinding("items");if(!e)return;const t=e=>this.byId(e).getConditions();const s=[a("warehouse",t("ffWarehouse")),a("storageBin",t("ffBin")),a("stockHU",t("ffStockHU")),a("topHU",t("ffTopHU")),a("product",t("ffProduct")),a("batch",t("ffBatch"))].filter(Boolean);const n=i(t("ffSearch"));if(typeof e.changeParameters==="function"){e.changeParameters({$search:n||undefined})}e.filter(s,"Application")},onDeleteRow:function(){const e=this._getSelectedContext();if(!e){n.show("Select a row first");return}o.confirm("Delete the selected row?",{actions:[o.Action.OK,o.Action.CANCEL],emphasizedAction:o.Action.OK,onClose:async t=>{if(t!==o.Action.OK)return;try{await e.delete();n.show("Row deleted");this.byId("physTable").removeSelections(true);this.byId("btnDownload").setEnabled(false);this.byId("btnDelete").setEnabled(false);const t=this.byId("physTable").getBinding("items");if(t)t.refresh()}catch(e){o.error(e?.message||"Delete failed")}}})},onDownloadSerials:function(){const e=this._getSelectedContext();if(!e){n.show("Select a row first");return}const o=e.getProperty("warehouse");const a=e.getProperty("storageBin");const i=e.getProperty("topHU");const r=e.getProperty("stockHU");const c=e.getProperty("product");const l=[new t("warehouse",s.EQ,o),new t("storageBin",s.EQ,a)];if(i)l.push(new t("topHU",s.EQ,i));if(r)l.push(new t("stockHU",s.EQ,r));if(c)l.push(new t("product",s.EQ,c));const u=this.byId("serialsTable");u.unbindItems();u.removeAllItems();const d=this.byId("serialsItemTemplate").clone();u.bindItems({path:"/SerialNumbers",template:d,templateShareable:false,filters:l});this.byId("serialsHint").setText(`Serials for ${o} / ${a} / ${c||"(no product)"} / TopHU ${i||"–"} / StockHU ${r||"–"}`);n.show("Serial numbers loaded")},onRefresh:function(){const e=this.byId("physTable");const t=this.byId("serialsTable");const s=e.getBinding("items");const o=t.getBinding("items");e.setBusy(true);if(o)t.setBusy(true);if(s){s.attachEventOnce("dataReceived",()=>e.setBusy(false));s.refresh()}else{e.setBusy(false)}if(o){o.attachEventOnce("dataReceived",()=>t.setBusy(false));o.refresh()}n.show("Refreshing data…")},onStartEdit:function(){n.show("Edit mode is disabled in this screen.")}})});
sap.ui.predefine("monitoringui/model/models", ["sap/ui/model/json/JSONModel","sap/ui/Device"],function(e,n){"use strict";return{createDeviceModel:function(){var i=new e(n);i.setDefaultBindingMode("OneWay");return i}}});
sap.ui.require.preload({
	"monitoringui/i18n/i18n.properties":'# --- App ---\nappTitle=Stock App\nappDescription=Stock counting flow\n\n# --- Warehouse screen ---\nwarehouseTitle=Warehouse\nwarehouseLabel=Warehouse Number\nwarehousePlaceholder=Enter/scan warehouse\ncontinue=Continue\n\n# --- Storage Bin screen ---\nbinTitle=Storage Bin\nbinLabel=Storage Bin\nbinPlaceholder=Enter/scan storage bin...\nstartInventory=Start\n\n# --- Stock Entry screen ---\nentryTitle=Stock Entry\nwarehouse=Warehouse\nbin=Bin\nhu=HU\npackMat=PackMat\nproduct=Product\nbatch=Batch\nquantity=Quantity\nuom=UoM\n\n# Buttons (with function key hints)\nconfirmF4=Confirm (F4)\nbtnTopHUF1=Top HU (F1)\nbtnSerNbF2=SerNb. (F2)\nbtnListF6=List (F6)\nbackF7=Back (F7)\nenter=Enter\nexportToExcel=Export to Excel (F3)\n\n# --- SubAction screen ---\nsubActionTitle=Actions\nscanTopHU=Scan Top HU\ntopHuLabel=Top HU\ntopHuTitle=Top HU\n\nscanSerials=Scan serial numbers\nserialPlaceholder=Scan serial...\nconfirmedListHint=Confirmed inventory for this bin\n\nback=Back\n\n# --- Dialog / Change HU Attributes (future use) ---\nchangeHuAttTitle=Change HU Attributes\nchangeHuAttHuType=HU Type\nchangeHuAttHuHeight=Height\nchangeHuMfsError=Error\nchangeHuAttCancel=Cancel\nchangeHuAttClearExcCode=Clear Exception\nchangeHuAttConfirm=Confirm\n\n# --- Validation messages ---\nerrQtyNoProduct=Quantity without product is not accepted.\nerrNoQtyNoProduct=Quantity and product should be filled.\nerrProductNeedsQty=Product entered requires a quantity.\nerrQtyNumeric=Quantity must be a positive number.\nerrDuplicateSerial=Duplicate serial number not accepted\nerrConfirmMinReq=Confirmation requires either a Stock HU or both Product and Quantity.\n\n# --- Info messages ---\nmsgSaved=Saved.\nmsgConfirmSuccess=Stock successfully confirmed\n\n',
	"monitoringui/manifest.json":'{"_version":"1.76.0","sap.app":{"id":"monitoringui","type":"application","i18n":{"bundleUrl":"i18n/i18n.properties","supportedLocales":[""]},"applicationVersion":{"version":"0.0.1"},"title":"{{appTitle}}","description":"{{appDescription}}","resources":"resources.json","dataSources":{"mainService":{"uri":"/rf/","type":"OData","settings":{"annotations":[],"odataVersion":"4.0"}}},"crossNavigation":{"inbounds":{"Monitoring-display":{"semanticObject":"Monitoring","action":"display","title":"{{appTitle}}","subTitle":"{{appDescription}}","icon":"sap-icon://activity-individual","signature":{"parameters":{},"additionalParameters":"allowed"}}}}},"sap.ui":{"technology":"UI5","deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"flexEnabled":false,"dependencies":{"minUI5Version":"1.141.0","libs":{"sap.m":{},"sap.ui.core":{}}},"contentDensities":{"compact":true,"cozy":true},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","settings":{"bundleName":"monitoringui.i18n.i18n","supportedLocales":[""]}},"":{"dataSource":"mainService","preload":true,"settings":{"operationMode":"Server","autoExpandSelect":true,"earlyRequests":true}}},"resources":{"css":[{"uri":"css/style.css"}]},"resourceRoots":{"monitoringui":"./"},"rootView":{"viewName":"monitoringui.view.PhysicalOverview","type":"XML","id":"PhysicalOverview","async":true}},"sap.cloud":{"public":true,"service":"monitoringapp"}}',
	"monitoringui/view/App.view.xml":'<mvc:View controllerName="monitoringui.controller.App"\n    displayBlock="true"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns="sap.m"><App id="app"></App></mvc:View>',
	"monitoringui/view/PhysicalOverview.view.xml":'<mvc:View\n    controllerName="monitoringui.controller.PhysicalOverview"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns="sap.m"\n    xmlns:mdc="sap.ui.mdc"\n    xmlns:core="sap.ui.core"\n><VBox class="sapUiSmallMargin"><Toolbar><Title\n                text="Physical Stock"\n                level="H3"\n            /><ToolbarSpacer /><Button\n                text="Refresh"\n                type="Transparent"\n                press=".onRefresh"\n            /><Button\n                id="btnDownload"\n                text="Download Serials"\n                type="Emphasized"\n                press=".onDownloadSerials"\n                enabled="{ui>/downloadEnabled}"\n            /><Button\n                id="btnSave"\n                text="Save"\n                type="Emphasized"\n                press=".onSave"\n                enabled="{ui>/saveEnabled}"\n                busy="{ui>/busy}"\n            /><Button\n                id="btnDelete"\n                text="Delete"\n                type="Reject"\n                press=".onDeleteRow"\n                enabled="{ui>/deleteEnabled}"\n            /></Toolbar><mdc:FilterBar\n            id="fbPhys"\n            showGoButton="true"\n            showAdaptFiltersButton="false"\n            search=".onFBSearch"\n        ><mdc:filterItems><mdc:FilterField\n                    id="ffSearch"\n                    label="Search"\n                    propertyKey="$search"\n                    maxConditions="1"\n                /><mdc:FilterField\n                    id="ffWarehouse"\n                    label="Warehouse"\n                    propertyKey="warehouse"\n                    maxConditions="-1"\n                /><mdc:FilterField\n                    id="ffBin"\n                    label="Bin"\n                    propertyKey="storageBin"\n                    maxConditions="-1"\n                /><mdc:FilterField\n                    id="ffStockHU"\n                    label="Stock HU"\n                    propertyKey="stockHU"\n                    maxConditions="-1"\n                /><mdc:FilterField\n                    id="ffTopHU"\n                    label="Top HU"\n                    propertyKey="topHU"\n                    maxConditions="-1"\n                /><mdc:FilterField\n                    id="ffProduct"\n                    label="Product"\n                    propertyKey="product"\n                    maxConditions="-1"\n                /><mdc:FilterField\n                    id="ffBatch"\n                    label="Batch"\n                    propertyKey="batch"\n                    maxConditions="-1"\n                /></mdc:filterItems></mdc:FilterBar><Table\n            id="physTable"\n            mode="SingleSelectLeft"\n            selectionChange=".onSelectionChange"\n            items="{ path: \'/PhysicalStock\' }"\n        ><columns><Column><Text text="Warehouse" /></Column><Column><Text text="Bin" /></Column><Column><Text text="Product" /></Column><Column><Text text="Batch" /></Column><Column hAlign="End"><Text text="Qty" /></Column><Column><Text text="UoM" /></Column><Column><Text text="Top HU" /></Column><Column><Text text="Stock HU" /></Column></columns><items><ColumnListItem><cells><Text text="{warehouse}" /><Text text="{storageBin}" /><Text text="{product}" /><Input\n                            width="100%"\n                            value="{ path: \'batch\', mode: \'sap.ui.model.BindingMode.OneTime\' }"\n                            liveChange=".onCellLiveChange"\n                        ><customData><core:CustomData\n                                    key="field"\n                                    value="batch"\n                                /></customData></Input><Input\n                            type="Number"\n                            textAlign="End"\n                            width="100%"\n                            value="{\n                            path: \'quantity\',\n                            mode: \'sap.ui.model.BindingMode.OneTime\',\n                            type: \'sap.ui.model.odata.type.Decimal\',\n                            constraints: { precision: 13, scale: 1 },\n                            formatOptions: { groupingEnabled: false, parseAsString: true }\n                        }"\n                            liveChange=".onCellLiveChange"\n                        ><customData><core:CustomData\n                                    key="field"\n                                    value="quantity"\n                                /></customData></Input><Text text="{uom}" /><Text text="{topHU}" /><Text text="{stockHU}" /></cells></ColumnListItem></items></Table><Toolbar class="sapUiTinyMarginTop"><Title\n                text="Serial Numbers"\n                level="H3"\n            /><ToolbarSpacer /><Text\n                id="serialsHint"\n                text="Select a row and click Download Serials"\n            /></Toolbar><Table\n            id="serialsTable"\n            growing="true"\n            growingScrollToLoad="true"\n            noDataText="No serials loaded"\n        ><columns><Column><Text text="Serial Number" /></Column><Column><Text text="Warehouse" /></Column><Column><Text text="Bin" /></Column><Column><Text text="Product" /></Column><Column><Text text="Top HU" /></Column><Column><Text text="Stock HU" /></Column></columns><items><ColumnListItem id="serialsItemTemplate"><cells><ObjectIdentifier title="{serialNumber}" /><Text text="{warehouse}" /><Text text="{storageBin}" /><Text text="{product}" /><Text text="{topHU}" /><Text text="{stockHU}" /></cells></ColumnListItem></items></Table></VBox></mvc:View>\n'
});
//# sourceMappingURL=Component-preload.js.map

sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/m/MessageToast"],function(e,t,n,s){"use strict";return e.extend("monitoringui.controller.PhysicalOverview",{onInit:function(){},_getSelectedContext:function(){const e=this.byId("physTable").getSelectedContexts();return e&&e.length?e[0]:null},onPhysSelect:function(){this.byId("btnDownload").setEnabled(!!this._getSelectedContext())},onSearchPhysical:function(e){const s=e.getParameter("newValue")||"";const o=this.byId("physTable").getBinding("items");const i=[];if(s){i.push(new t({filters:[new t("warehouse",n.Contains,s),new t("storageBin",n.Contains,s),new t("product",n.Contains,s),new t("batch",n.Contains,s),new t("topHU",n.Contains,s),new t("stockHU",n.Contains,s)],and:false}))}o.filter(i,"Application")},onDownloadSerials:function(){const e=this._getSelectedContext();if(!e){s.show("Select a row first");return}const o=e.getProperty("warehouse");const i=e.getProperty("storageBin");const a=e.getProperty("topHU");const r=e.getProperty("stockHU");const l=e.getProperty("product");const c=[new t("warehouse",n.EQ,o),new t("storageBin",n.EQ,i),new t("topHU",n.EQ,a||null),new t("stockHU",n.EQ,r||null),new t("product",n.EQ,l||null)];const u=this.byId("serialsTable");u.unbindItems();u.removeAllItems();const d=this.byId("serialsItemTemplate").clone();u.bindItems({path:"/SerialNumbers",template:d,templateShareable:false,filters:c});this.byId("serialsHint").setText(`Serials for ${o} / ${i} / ${l||"(no product)"} / TopHU ${a||"–"} / StockHU ${r||"–"}`);s.show("Serial numbers loaded")},onRefresh:function(){const e=this.byId("physTable");const t=this.byId("serialsTable");const n=e.getBinding("items");const o=t.getBinding("items");e.setBusy(true);if(o)t.setBusy(true);if(n){n.attachEventOnce("dataReceived",()=>e.setBusy(false));n.refresh()}else{e.setBusy(false)}if(o){o.attachEventOnce("dataReceived",()=>t.setBusy(false));o.refresh()}s.show("Refreshing data…")}})});
//# sourceMappingURL=PhysicalOverview.controller.js.map
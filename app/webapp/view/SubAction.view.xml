<mvc:View controllerName="stockappui.controller.SubAction"
          xmlns:mvc="sap.ui.core.mvc"
          xmlns:core="sap.ui.core"
          xmlns="sap.m"
          xmlns:form="sap.ui.layout.form">

  <Page id="SubActionPage"
        showNavButton="true"
        navButtonPress="onNavBack"
        title="{i18n>subActionTitle}">
        
    <content>
      <!-- Top HU mode -->
      <VBox class="sapUiSmallMargin"
            visible="{= ${vm>/__sub/mode} === 'TopHU' }">

        <form:SimpleForm layout="ResponsiveGridLayout"
                         editable="true"
                         columnsXL="1" columnsL="1" columnsM="1"
                         labelSpanXL="3" labelSpanL="3" labelSpanM="4"
                         adjustLabelSpan="false">
          <Label text="{i18n>topHuLabel}"/>
          <Input id="inpTopHU"
                 value="{vm>/__sub/topHu}"
                 submit="onSaveTopHU"/>
        </form:SimpleForm>

        <Text class="sapUiSmallMarginTop" text="{i18n>topHuNote}"/>
      </VBox>

      <!-- Serials mode -->
      <VBox class="sapUiSmallMargin"
            visible="{= ${vm>/__sub/mode} === 'SerNb' }">

        <form:SimpleForm layout="ResponsiveGridLayout"
                         editable="true"
                         columnsXL="1" columnsL="1" columnsM="1"
                         labelSpanXL="3" labelSpanL="3" labelSpanM="4"
                         adjustLabelSpan="false">
          <Label text="{i18n>scanSerials}"/>
          <Input id="inpSer"
                 placeholder="{i18n>serialPlaceholder}"
                 submit="onAddSerial"/>
        </form:SimpleForm>

        <List id="lstSer" items="{ path: 'vm>/serials' }" class="sapUiSmallMarginTop">
          <StandardListItem title="{vm>}" type="Inactive"/>
        </List>
      </VBox>

      <!-- List mode -->
      <VBox class="sapUiSmallMargin"
            visible="{= ${vm>/__sub/mode} === 'List' }">
        <Text text="{i18n>confirmedListHint}"/>
        <List id="lstConfirmed" items="{ vm>/list }" class="sapUiSmallMarginTop">
          <ObjectListItem
            title="{= ${vm>product} || ${vm>hu} }"
            number="{vm>quantity}"
            numberUnit="{vm>uom}">
            <attributes>
              <ObjectAttribute title="HU" text="{vm>hu}"/>
              <ObjectAttribute title="Batch" text="{vm>batch}"/>
              <ObjectAttribute title="PackMat" text="{vm>packMat}"/>
            </attributes>
          </ObjectListItem>
        </List>
      </VBox>
    </content>

    <!-- Footer toolbar with actions (like StockEntry) -->
    <footer>
      <Toolbar>
        <ToolbarSpacer/>
        <!-- Confirm only for TopHU mode -->
        <Button text="{i18n>confirmF4}"
                type="Emphasized"
                press="onSaveTopHU"
                visible="{= ${vm>/__sub/mode} === 'TopHU' }"/>
        <!-- Back always available -->
        <Button text="{i18n>backF7}" press="onBackToEntry"/>
        <ToolbarSpacer/>
      </Toolbar>
    </footer>

  </Page>
</mvc:View>
